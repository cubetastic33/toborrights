{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,sBAGMC,EAAWF,EAAAG,aAAa,2CAC5B,oNA6EF,IAAMC,EAAU,CA3EhB,WACEF,EAASG,KAAK,mBACZC,OAAO,6CACPC,MAAM,GACNC,eACAC,SACAC,MAAK,SAAAC,OAAGC,EAAID,EAAJC,KACNC,EAAAC,EAAA,CAAE,oBAAoBC,OAAOF,EAAAC,EAAA,CAAG,mGAU5BE,OAJAJ,EAAKK,MAAM,yDAQXD,OAJAJ,EAAKM,MAAM,0DAQXF,OAJAJ,EAAKO,QAAQ,qEAIWH,OAAxBJ,EAAKQ,mBAAmB,0CAOlC,WACElB,EAASG,KAAK,kBACZC,OAAO,oBACPE,eACAE,MAAK,SAAAC,OAAGC,EAAID,EAAJC,KACAS,EAAQR,EAAAC,EAAA,CAAE,mBAChBO,EAAMN,OAAOF,EAAAC,EAAA,CAAE,kDACf,IAAMQ,EAAOT,EAAAC,EAAA,CAAE,mBACVS,GAA0B,EAA1BC,GAA0B,EAA1BC,OAA0BC,MAA/B,IAAA,IAAKC,EAAAC,EAA8BhB,EAAIiB,OAAAC,cAAlCP,GAAAI,EAAAC,EAA0BG,QAAAC,MAA1BT,GAA0B,EAAA,CAA1B,IAAAU,EAAAN,EAA0BO,MAAlBC,EAASF,EAATE,UAAWjB,EAAKe,EAALf,MACtBI,EAAKP,OAAOF,EAAAC,EAAA,CAAG,+BAGTE,OADAmB,EAAU,uBACJnB,OAANE,EAAM,4CAJTM,GAA0B,EAA1BC,EAA0BW,cAA1Bb,GAA0B,MAA1BK,EAA0BS,QAA1BT,EAA0BS,oBAA1Bb,QAAAC,GAQLJ,EAAMN,OAAOO,GACbT,EAAAC,EAAA,CAAE,yBAAyBC,OAAOM,OAIxC,WACEnB,EAASG,KAAK,2BACZC,OAAO,qBACPE,eACAE,MAAK,SAAAC,OAAGC,EAAID,EAAJC,KACAS,EAAQR,EAAAC,EAAA,CAAE,mBAEhBO,EAAMN,OAAOF,EAAAC,EAAA,CAAE,2DACf,IAAMQ,EAAOT,EAAAC,EAAA,CAAE,mBACVS,GAA2B,EAA3BC,GAA2B,EAA3BC,OAA2BC,MAAhC,IAAA,IAAKC,EAAAC,EAA+BhB,EAAIiB,OAAAC,cAAnCP,GAAAI,EAAAC,EAA2BG,QAAAC,MAA3BT,GAA2B,EAAA,CAA3B,IAAAU,EAAAN,EAA2BO,MAAnBI,EAAUL,EAAVK,WAAYpB,EAAKe,EAALf,MACvBI,EAAKP,OAAOF,EAAAC,EAAA,CAAG,+BAGTE,OADAsB,EAAW,uBACLtB,OAANE,EAAM,4CAJTM,GAA2B,EAA3BC,EAA2BW,cAA3Bb,GAA2B,MAA3BK,EAA2BS,QAA3BT,EAA2BS,oBAA3Bb,QAAAC,GAQLJ,EAAMN,OAAOO,GACbT,EAAAC,EAAA,CAAE,mCAAmCC,OAAOM,QAS5CkB,EAAa,kBAAM1B,EAAAC,GAAE0B,KAAKpC,EAASS,EAAAC,GAAE2B,OAG3C5B,EAAAC,EAAA,CAAE4B,UAAUC,MAAMJ,GAElBrC,EAASG,KAAK,UAAUuC,GAAG,IAAKL,GAAYM","sources":["scripts/report.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\nimport $ from \"cash-dom\";\n\nconst supabase = createClient(\"https://gwcnruxqmtukvguyhuga.supabase.co\",\n  \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd3Y25ydXhxbXR1a3ZndXlodWdhIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDk5MjI5MTIsImV4cCI6MTk2NTQ5ODkxMn0.Cpm-Myt5YdzFrRzYcWWaFxVDiyQWeJCD3dTZBvRlcp4\");\n\nfunction donation_report () {\n  supabase.from(\"donation_report\").\n    select(\"total, count, average, standard_deviation\").\n    limit(1).\n    throwOnError().\n    single().\n    then(({ data }) => {\n      $(\"#donation-report\").append($(`<table>\n  <thead>\n  <h2>Donation Report</h2>\n  </thead>\n  <tr>\n    <td>Total</td>\n    <td>${data.total}</td>\n  </tr>\n  <tr>\n    <td>Orders</td>\n    <td>${data.count}</td>\n  </tr>\n  <tr>\n    <td>Average</td>\n    <td>${data.average}</td>\n  </tr>\n  <tr>\n    <td>Standard Deviation</td>\n    <td>${data.standard_deviation}</td>\n  </tr>\n</table>\n      `));\n    });\n}\n\nfunction timeslot_load_report () {\n  supabase.from(\"time_slot_load\").\n    select(\"time_slot, count\").\n    throwOnError().\n    then(({ data }) => {\n      const table = $(\"<table></table>\");\n      table.append($(\"<thead><h2>Time Slot Load Report</h2></thead>\"));\n      const body = $(\"<tbody></tbody>\");\n      for (const { time_slot, count } of data) {\n        body.append($(`\n        <tr>\n        <td>${time_slot}</td>\n        <td>${count}</td>\n        </tr>\n      `));\n      }\n      table.append(body);\n      $(\"#timeslot-load-report\").append(table);\n    });\n}\n\nfunction restaurant_distribution_report () {\n  supabase.from(\"restaurant_distribution\").\n    select(\"restaurant, count\").\n    throwOnError().\n    then(({ data }) => {\n      const table = $(\"<table></table>\");\n\n      table.append($(\"<thead><h2>Restaurant Distribution Report</h2></thead>\"));\n      const body = $(\"<tbody></tbody>\");\n      for (const { restaurant, count } of data) {\n        body.append($(`\n        <tr>\n        <td>${restaurant}</td>\n        <td>${count}</td>\n        </tr>\n      `));\n      }\n      table.append(body);\n      $(\"#restaurant-distribution-report\").append(table);\n    });\n}\n\nconst reports = [\n  donation_report,\n  timeslot_load_report,\n  restaurant_distribution_report];\n\nconst update_dom = () => $.each(reports, $.call);\n\n// load report all initially\n$(document).ready(update_dom);\n// reload on database changes\nsupabase.from(\"orders\").on(\"*\", update_dom).subscribe();\n"],"names":["$buE07","parcelRequire","$0ad47f8cec201dbe$var$supabase","createClient","$0ad47f8cec201dbe$var$reports","from","select","limit","throwOnError","single","then","param","data","$parcel$interopDefault","$acYek","append","concat","total","count","average","standard_deviation","table","body","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","_value","value","time_slot","err","return","restaurant","$0ad47f8cec201dbe$var$update_dom","each","call","document","ready","on","subscribe"],"version":3,"file":"report.596c3112.js.map"}