{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,sBAGA,MAAMC,EAAWF,EAAAG,aAAa,2CAC5B,oNA6EF,MAAMC,EAAU,CA3EhB,WACEF,EAASG,KAAK,mBACZC,OAAO,6CACPC,MAAM,GACNC,eACAC,SACAC,MAAK,EAZTC,KAYYA,MACNC,EAAAC,EAAA,CAAE,oBAAoBC,OAAOF,EAAAC,EAAA,CAAE,mGAM3BF,EAAKI,6DAILJ,EAAKK,8DAILL,EAAKM,2EAILN,EAAKO,2DAOf,WACEhB,EAASG,KAAK,kBACZC,OAAO,oBACPE,eACAE,MAAK,EA1CTC,KA0CYA,MACN,MAAMQ,EAAQP,EAAAC,EAAA,CAAE,mBAChBM,EAAML,OAAOF,EAAAC,EAAA,CAAE,kDACf,MAAMO,EAAOR,EAAAC,EAAA,CAAE,mBACf,IAAK,MA9CXQ,UA8CmBA,EA9CnBL,MA8C8BA,KAAWL,EACjCS,EAAKN,OAAOF,EAAAC,EAAA,CAAE,+BAERQ,uBACAL,kCAIRG,EAAML,OAAOM,GACbR,EAAAC,EAAA,CAAE,yBAAyBC,OAAOK,OAIxC,WACEjB,EAASG,KAAK,2BACZC,OAAO,qBACPE,eACAE,MAAK,EA/DTC,KA+DYA,MACN,MAAMQ,EAAQP,EAAAC,EAAA,CAAE,mBAEhBM,EAAML,OAAOF,EAAAC,EAAA,CAAE,2DACf,MAAMO,EAAOR,EAAAC,EAAA,CAAE,mBACf,IAAK,MApEXS,WAoEmBA,EApEnBN,MAoE+BA,KAAWL,EAClCS,EAAKN,OAAOF,EAAAC,EAAA,CAAE,+BAERS,uBACAN,kCAIRG,EAAML,OAAOM,GACbR,EAAAC,EAAA,CAAE,mCAAmCC,OAAOK,QAS5CI,EAAa,IAAMX,EAAAC,GAAEW,KAAKpB,EAASQ,EAAAC,GAAEY,MAG3Cb,EAAAC,EAAA,CAAEa,UAAUC,MAAMJ,GAElBrB,EAASG,KAAK,UAAUuB,GAAG,IAAKL,GAAYM","sources":["scripts/report.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\nimport $ from \"cash-dom\";\n\nconst supabase = createClient(\"https://gwcnruxqmtukvguyhuga.supabase.co\",\n  \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd3Y25ydXhxbXR1a3ZndXlodWdhIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDk5MjI5MTIsImV4cCI6MTk2NTQ5ODkxMn0.Cpm-Myt5YdzFrRzYcWWaFxVDiyQWeJCD3dTZBvRlcp4\");\n\nfunction donation_report () {\n  supabase.from(\"donation_report\").\n    select(\"total, count, average, standard_deviation\").\n    limit(1).\n    throwOnError().\n    single().\n    then(({ data }) => {\n      $(\"#donation-report\").append($(`<table>\n  <thead>\n  <h2>Donation Report</h2>\n  </thead>\n  <tr>\n    <td>Total</td>\n    <td>${data.total}</td>\n  </tr>\n  <tr>\n    <td>Orders</td>\n    <td>${data.count}</td>\n  </tr>\n  <tr>\n    <td>Average</td>\n    <td>${data.average}</td>\n  </tr>\n  <tr>\n    <td>Standard Deviation</td>\n    <td>${data.standard_deviation}</td>\n  </tr>\n</table>\n      `));\n    });\n}\n\nfunction timeslot_load_report () {\n  supabase.from(\"time_slot_load\").\n    select(\"time_slot, count\").\n    throwOnError().\n    then(({ data }) => {\n      const table = $(\"<table></table>\");\n      table.append($(\"<thead><h2>Time Slot Load Report</h2></thead>\"));\n      const body = $(\"<tbody></tbody>\");\n      for (const { time_slot, count } of data) {\n        body.append($(`\n        <tr>\n        <td>${time_slot}</td>\n        <td>${count}</td>\n        </tr>\n      `));\n      }\n      table.append(body);\n      $(\"#timeslot-load-report\").append(table);\n    });\n}\n\nfunction restaurant_distribution_report () {\n  supabase.from(\"restaurant_distribution\").\n    select(\"restaurant, count\").\n    throwOnError().\n    then(({ data }) => {\n      const table = $(\"<table></table>\");\n\n      table.append($(\"<thead><h2>Restaurant Distribution Report</h2></thead>\"));\n      const body = $(\"<tbody></tbody>\");\n      for (const { restaurant, count } of data) {\n        body.append($(`\n        <tr>\n        <td>${restaurant}</td>\n        <td>${count}</td>\n        </tr>\n      `));\n      }\n      table.append(body);\n      $(\"#restaurant-distribution-report\").append(table);\n    });\n}\n\nconst reports = [\n  donation_report,\n  timeslot_load_report,\n  restaurant_distribution_report];\n\nconst update_dom = () => $.each(reports, $.call);\n\n// load report all initially\n$(document).ready(update_dom);\n// reload on database changes\nsupabase.from(\"orders\").on(\"*\", update_dom).subscribe();\n"],"names":["$7JJcr","parcelRequire","$7618dd0f191bdda6$var$supabase","createClient","$7618dd0f191bdda6$var$reports","from","select","limit","throwOnError","single","then","data","$parcel$interopDefault","$gOFYb","append","total","count","average","standard_deviation","table","body","time_slot","restaurant","$7618dd0f191bdda6$var$update_dom","each","call","document","ready","on","subscribe"],"version":3,"file":"report.1bfb31e3.js.map"}