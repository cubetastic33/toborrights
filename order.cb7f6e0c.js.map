{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,sBCAO,SAASC,EAAWC,OAAiBC,EAAAC,UAAAC,OAAA,QAAA,IAAAD,UAAA,GAAuBA,UAAA,GAAJ,IACrDE,EAAQC,SAASC,eAAe,SACtCF,EAAMG,UAAYP,EAClBI,EAAMI,MAAMC,QAAU,QAEtBC,YAAW,kBAAMN,EAAMO,UAAY,eAAcV,GACjDS,YAAW,WACPN,EAAMO,UAAY,GAClBP,EAAMI,MAAMC,QAAU,SACvBR,EAAW,KDJlB,IAAMW,EAAWf,EAAAgB,aAAa,2CAA4C,oNAGpEC,EAAOF,EAASG,KAAKC,OACd,OAATF,IAAeG,SAASC,KAAO,cACnCC,EAAAC,EAAA,CAAE,UAAUC,KAAKP,EAAKQ,MAAMC,MAAM,GAAG,IAAKC,eAE1CL,EAAAC,EAAA,CAAE,aAAaK,GAAG,SAAS,kBAAMb,EAASG,KAAKW,UAC1CC,MAAK,SAAAC,GACF7B,EAAW,2BACXkB,SAASC,KAAO,OAEnBW,OAAM,SAAAC,UAAO/B,EAAW+B,EAAIC,SAASV,YAE1CT,EACKoB,KAAK,eACLC,OAAO,eACPN,MAAK,SAAAO,GACF,GAAIA,EAAOC,MACPpC,EAAWmC,EAAOC,MAAMnC,QAAS,UAC9B,GAA2B,IAAvBkC,EAAOE,KAAKjC,OACnBJ,EAAW,4BAA6B,UAExC,IAAK,IAAIsC,EAAI,EAAGA,EAAIH,EAAOE,KAAKjC,OAAQkC,IAAK,CACzC,IAA6BC,EAAA1B,EAAS2B,QAAQP,KAAK,qBAAqBQ,aAAaN,EAAOE,KAAKC,GAAU,OAAnGF,EAAqBG,EAArBH,MAAOM,EAAcH,EAAdG,UACf,GAAIN,EAEA,YADApC,EAAWoC,EAAMnC,QAAS,KAG9B,IAAI0C,EAAOR,EAAOE,KAAKC,GAAS,KAChClB,EAAAC,EAAA,CAAE,gBAAgBuB,OAAQ,0DAChBC,OADwEH,EAAU,mCAC7EG,OAALF,EAAK,sCAIxB,SAAAP,UAASpC,EAAWoC,EAAO","sources":["scripts/order.ts","scripts/main.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\nimport $ from \"cash-dom\";\nimport { show_toast } from \"./main\";\n\n// Create a single supabase client for interacting with your database\nconst supabase = createClient(\"https://gwcnruxqmtukvguyhuga.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd3Y25ydXhxbXR1a3ZndXlodWdhIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDk5MjI5MTIsImV4cCI6MTk2NTQ5ODkxMn0.Cpm-Myt5YdzFrRzYcWWaFxVDiyQWeJCD3dTZBvRlcp4\");\n\n// If the user is signed out\nconst user = supabase.auth.user();\nif (user === null) location.href = \"index.html\";\n$(\".netid\").text(user.email.slice(0, -13).toUpperCase());\n\n$(\"#sign-out\").on(\"click\", () => supabase.auth.signOut()\n    .then(_response => {\n        show_toast(\"Signed out successfully\");\n        location.href = \"/\";\n    })\n    .catch(err => show_toast(err.response.text)));\n\nsupabase\n    .from(\"restaurants\")\n    .select(\"name, image\")\n    .then(result => {\n        if (result.error) {\n            show_toast(result.error.message, 5000);\n        } else if (result.data.length === 0) {\n            show_toast(\"No restaurants were found\", 5000);\n        } else {\n            for (let i = 0; i < result.data.length; i++) {\n                const { error, publicURL } = supabase.storage.from(\"restaurant-images\").getPublicUrl(result.data[i][\"image\"]);\n                if (error) {\n                    show_toast(error.message, 5000);\n                    return;\n                }\n                let name = result.data[i][\"name\"];\n                $(\".restaurants\").append(`<div class=\"restaurant\" style=\"background-image: url('${publicURL}')\">\n                    <h1>${name}</h1>\n                </div>`);\n            }\n        }\n    }, error => show_toast(error, 5000));\n","export function show_toast(message: string, duration: number = 2000) {\n    const toast = document.getElementById(\"toast\");\n    toast.innerText = message;\n    toast.style.display = \"block\";\n    // After duration, slide the toast out of view\n    setTimeout(() => toast.className = \"slide-down\", duration);\n    setTimeout(() => {\n        toast.className = \"\";\n        toast.style.display = \"none\";\n    }, duration + 500);\n}\n"],"names":["$buE07","parcelRequire","$bccbacffeadd98ad$export$5196e4c01fa56fcb","message","duration","arguments","length","toast","document","getElementById","innerText","style","display","setTimeout","className","$411765a1cea35d6f$var$supabase","createClient","$411765a1cea35d6f$var$user","auth","user","location","href","$parcel$interopDefault","$acYek","text","email","slice","toUpperCase","on","signOut","then","_response","catch","err","response","from","select","result","error","data","i","ref","storage","getPublicUrl","publicURL","name","append","concat"],"version":3,"file":"order.cb7f6e0c.js.map"}